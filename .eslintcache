[{"/Users/nataliemclaren/Sites/hacker-news-reader/src/index.tsx":"1","/Users/nataliemclaren/Sites/hacker-news-reader/src/serviceWorkerRegistration.ts":"2","/Users/nataliemclaren/Sites/hacker-news-reader/src/reportWebVitals.ts":"3","/Users/nataliemclaren/Sites/hacker-news-reader/src/App.tsx":"4","/Users/nataliemclaren/Sites/hacker-news-reader/src/theme/colours.tsx":"5","/Users/nataliemclaren/Sites/hacker-news-reader/src/theme/devices.tsx":"6","/Users/nataliemclaren/Sites/hacker-news-reader/src/theme/sizes.tsx":"7","/Users/nataliemclaren/Sites/hacker-news-reader/src/helpers/api.tsx":"8","/Users/nataliemclaren/Sites/hacker-news-reader/src/components/Header.tsx":"9","/Users/nataliemclaren/Sites/hacker-news-reader/src/components/StoriesList.tsx":"10","/Users/nataliemclaren/Sites/hacker-news-reader/src/config.tsx":"11","/Users/nataliemclaren/Sites/hacker-news-reader/src/components/Story.tsx":"12","/Users/nataliemclaren/Sites/hacker-news-reader/src/helpers/dates.tsx":"13","/Users/nataliemclaren/Sites/hacker-news-reader/src/components/headings/InfoHeading.tsx":"14","/Users/nataliemclaren/Sites/hacker-news-reader/src/components/notifications/ToastNotification.tsx":"15","/Users/nataliemclaren/Sites/hacker-news-reader/src/components/buttons/Button.tsx":"16"},{"size":816,"mtime":1611757190753,"results":"17","hashOfConfig":"18"},{"size":5256,"mtime":1611670346096,"results":"19","hashOfConfig":"18"},{"size":425,"mtime":1611655632286,"results":"20","hashOfConfig":"18"},{"size":1441,"mtime":1611766043019,"results":"21","hashOfConfig":"18"},{"size":167,"mtime":1611757190756,"results":"22","hashOfConfig":"18"},{"size":506,"mtime":1611664883712,"results":"23","hashOfConfig":"18"},{"size":189,"mtime":1611664883718,"results":"24","hashOfConfig":"18"},{"size":629,"mtime":1611757190751,"results":"25","hashOfConfig":"18"},{"size":584,"mtime":1611757190746,"results":"26","hashOfConfig":"18"},{"size":3604,"mtime":1611757190747,"results":"27","hashOfConfig":"18"},{"size":137,"mtime":1611757190749,"results":"28","hashOfConfig":"18"},{"size":1233,"mtime":1611757190747,"results":"29","hashOfConfig":"18"},{"size":725,"mtime":1611757190752,"results":"30","hashOfConfig":"18"},{"size":615,"mtime":1611757190748,"results":"31","hashOfConfig":"18"},{"size":913,"mtime":1611765984278,"results":"32","hashOfConfig":"18"},{"size":412,"mtime":1611765963167,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"13txryf",{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"38"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/nataliemclaren/Sites/hacker-news-reader/src/index.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/serviceWorkerRegistration.ts",[],["68","69"],"/Users/nataliemclaren/Sites/hacker-news-reader/src/reportWebVitals.ts",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/App.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/theme/colours.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/theme/devices.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/theme/sizes.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/helpers/api.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/components/Header.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/components/StoriesList.tsx",["70"],"import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Story from \"./Story\";\nimport * as APIHelper from \"../helpers/api\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { IStory } from \"../interfaces/IStory\";\nimport InfoHeading from \"./headings/InfoHeading\";\nimport { colours } from \"../theme/colours\";\nimport * as DatesHelper from \"../helpers/dates\";\n\n/**\n *\n *\n * @returns\n */\nconst StoriesList = () => {\n  const [stories, setStories] = useState<any>([]);\n  const [fetchedIndex, setFetchedIndex] = useState<number>(0);\n  const [error, setError] = React.useState(false);\n  const [isFetchingItems, setIsFetchingItems] = useState<boolean>(false);\n  const storyIds = useRef([]);\n\n  const sortedByDesc = DatesHelper.orderByDesc(stories);\n\n  const allStories =\n    sortedByDesc &&\n    sortedByDesc.map((story: IStory) => <Story key={story.id} story={story} />);\n\n  /**\n   * Checks a story to see if its valid.\n   * Conditions: the type is 'story', it has a url, it isn't dead or deleted.\n   *\n   * @param {IStory} story\n   * @returns {boolean} true or false depending on whether it is valid or not\n   */\n  const storyIsValid = (story: IStory) => {\n    return story.type === \"story\" && !story.deleted && !story.dead && story.url;\n  };\n\n  /**\n   * GetMoreStories\n   * Fetches 20 stories at a time from the last story it fetched\n   * Checks that it is a valid story (not dead, deleted, has a url and is of type story)\n   * Updates local state with valid\n   */\n  const getMoreStories = useCallback(() => {\n    if (!isFetchingItems && fetchedIndex <= 480) {\n      setIsFetchingItems(true);\n\n      storyIds.current\n        .slice(fetchedIndex, fetchedIndex + 20)\n        .forEach((id: number) => {\n          APIHelper.fetchItem(id)\n            .then((response: any) => {\n              if (response.status !== 200) {\n                throw Error(\"API Error\");\n              }\n\n              return response.json();\n            })\n            .then((story: any) => {\n              if (storyIsValid(story)) {\n                setStories((str: any) => str.concat(story));\n              }\n            })\n            .catch((err: any) => {\n              setError(true);\n            });\n        });\n    }\n\n    setFetchedIndex((index) => index + 20);\n    setIsFetchingItems(false);\n  }, [fetchedIndex, isFetchingItems]);\n\n  useEffect(() => {\n    const fetchNewStories = async () => {\n      APIHelper.fetchNewStories()\n        .then((response: any) => {\n          if (response.status !== 200) {\n            throw Error(\"API Error\");\n          }\n          return response.json();\n        })\n        .then((newStoriesIds: any) => {\n          storyIds.current = newStoriesIds;\n          getMoreStories();\n        })\n        .catch((err) => {\n          setError(true);\n        });\n    };\n\n    fetchNewStories();\n    setFetchedIndex(0);\n  }, []);\n\n  if (error) {\n    return (\n      <InfoHeading data-test=\"component-error\" colour={colours.orange}>\n        API Error\n      </InfoHeading>\n    );\n  }\n\n  if (!allStories.length) {\n    return (\n      <InfoHeading colour={\"black\"} data-test=\"component-stories-list\">\n        LOADING...\n      </InfoHeading>\n    );\n  }\n\n  return (\n    <div data-test=\"component-stories-list\">\n      <InfiniteScroll\n        dataLength={stories.length}\n        next={getMoreStories}\n        hasMore={stories[stories.length - 1] !== 1}\n        loader={<InfoHeading>Loading...</InfoHeading>}\n        endMessage={<p>No more stories, you have seen it all.</p>}\n      >\n        {allStories}\n      </InfiniteScroll>\n    </div>\n  );\n};\n\nexport default StoriesList;\n","/Users/nataliemclaren/Sites/hacker-news-reader/src/config.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/components/Story.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/helpers/dates.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/components/headings/InfoHeading.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/components/notifications/ToastNotification.tsx",[],"/Users/nataliemclaren/Sites/hacker-news-reader/src/components/buttons/Button.tsx",[],{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","severity":1,"message":"76","line":95,"column":6,"nodeType":"77","endLine":95,"endColumn":8,"suggestions":"78"},"no-native-reassign",["79"],"no-negated-in-lhs",["80"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getMoreStories'. Either include it or remove the dependency array.","ArrayExpression",["81"],"no-global-assign","no-unsafe-negation",{"desc":"82","fix":"83"},"Update the dependencies array to be: [getMoreStories]",{"range":"84","text":"85"},[2863,2865],"[getMoreStories]"]